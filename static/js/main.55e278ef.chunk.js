(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(t,e,n){"use strict";var r,o=n(0),i=n.n(o),a=n(38),s=n.n(a),c=(n(70),n(71),n(1)),l=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},u=c.a.button(r||(r=l(["\n  appearance: none;\n  background: transparent;\n  color: white;\n  height: 2rem;\n  margin: 1rem;\n  border-radius: 2rem;\n  border: 2px solid var(--color-secondary);\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease-in-out;\n  flex-shrink: 0;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n\n  &:hover {\n    background: var(--color-secondary);\n    color: white;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"],["\n  appearance: none;\n  background: transparent;\n  color: white;\n  height: 2rem;\n  margin: 1rem;\n  border-radius: 2rem;\n  border: 2px solid var(--color-secondary);\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease-in-out;\n  flex-shrink: 0;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n\n  &:hover {\n    background: var(--color-secondary);\n    color: white;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])));n.d(e,"a",function(){return y});var d,p=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=c.a.div(d||(d=p(["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem 0 0 1rem;\n"],["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem 0 0 1rem;\n"]))),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={code:e.props.code},e}return f(e,t),e.prototype.render=function(){var t=this,e=this.state.code,n=this.props,r=n.onChange,o=n.height,a=void 0===o?"100%":o,c=n.changeText,l=void 0===c?"Update":c;return i.a.createElement(h,null,i.a.createElement(s.a,{mode:"javascript",theme:"monokai",editorProps:{$blockScrolling:!0},value:e,onChange:function(e){return t.setState({code:e})},setOptions:{tabSize:2,fontSize:"10px"},width:"100%",height:a,showGutter:!1,readOnly:!r}),r?i.a.createElement(u,{onClick:function(){return r(t.state.code)}},l):null)},e}(o.Component)},2:function(t,e,n){"use strict";function r(t){var e;return(e=[]).concat.apply(e,t)}function o(t){return"function"===typeof t?t.toString():t}function i(t){var e=t.cond?"["+t.cond.toString().replace(/\n/g,"")+"]":"";return t.source.id+":"+t.event+e+"->"+t.target.id}function a(t){if(!t)return!0;var e=t.getBoundingClientRect();return 0===e.width&&0===e.height}function s(t,e){var n=e.getBoundingClientRect();return{top:t.top-n.top,right:t.right-n.left,bottom:t.bottom-n.top,left:t.left-n.left,width:t.width,height:t.height}}function c(t){var e=Object.keys(t.states);return t.initialStateNodes.concat(r(e.map(function(e){var n=t.states[e];return"compound"===n.type||"parallel"===n.type?c(t.states[e]):[]})))}function l(t){return t.onEntry.concat(t.onExit)}function u(t){return{x:t.left+t.width/2,y:t.top+t.height/2}}n.d(e,"b",function(){return o}),n.d(e,"f",function(){return i}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return s}),n.d(e,"c",function(){return c}),n.d(e,"g",function(){return l}),n.d(e,"a",function(){return u})},20:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return StateChart});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),xstate_lib_interpreter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11),xstate_lib_interpreter__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(xstate_lib_interpreter__WEBPACK_IMPORTED_MODULE_2__),xstate__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),xstate_lib_graph__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9),xstate_lib_graph__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(xstate_lib_graph__WEBPACK_IMPORTED_MODULE_4__),_StateChartNode__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(34),_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2),_Edge__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(37),_Editor__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(18),_InitialEdge__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(39),__makeTemplateObject=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__extends=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__assign=function(){return(__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},StyledViewTab=styled_components__WEBPACK_IMPORTED_MODULE_1__.a.li(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  padding: 0 1rem;\n  border-bottom: 2px solid transparent;\n  list-style: none;\n  text-transform: uppercase;\n  user-select: none;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  &:not([data-active]):hover {\n    border-color: var(--color-secondary-light);\n  }\n\n  &[data-active] {\n    border-color: var(--color-secondary);\n  }\n"],["\n  padding: 0 1rem;\n  border-bottom: 2px solid transparent;\n  list-style: none;\n  text-transform: uppercase;\n  user-select: none;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  &:not([data-active]):hover {\n    border-color: var(--color-secondary-light);\n  }\n\n  &[data-active] {\n    border-color: var(--color-secondary);\n  }\n"]))),StyledViewTabs=styled_components__WEBPACK_IMPORTED_MODULE_1__.a.ul(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  display: flex;\n  width: 100%;\n  height: 100%;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: stretch;\n  margin: 0;\n  padding: 0;\n  flex-grow: 0;\n  flex-shrink: 0;\n"],["\n  display: flex;\n  width: 100%;\n  height: 100%;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: stretch;\n  margin: 0;\n  padding: 0;\n  flex-grow: 0;\n  flex-shrink: 0;\n"]))),StyledSidebar=styled_components__WEBPACK_IMPORTED_MODULE_1__.a.div(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  background-color: var(--color-sidebar);\n  color: white;\n  overflow: hidden;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 2rem 1fr;\n  border-radius: 0.5rem\n  box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.2);\n"],["\n  background-color: var(--color-sidebar);\n  color: white;\n  overflow: hidden;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 2rem 1fr;\n  border-radius: 0.5rem\n  box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.2);\n"]))),StyledView=styled_components__WEBPACK_IMPORTED_MODULE_1__.a.div(templateObject_4||(templateObject_4=__makeTemplateObject(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n  overflow: hidden;\n"],["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n  overflow: hidden;\n"]))),StyledStateChart=styled_components__WEBPACK_IMPORTED_MODULE_1__.a.div(templateObject_5||(templateObject_5=__makeTemplateObject(["\n  display: grid;\n  grid-template-columns: 1fr 20rem;\n  grid-template-rows: auto;\n  font-family: sans-serif;\n  font-size: 10px;\n  overflow: hidden;\n  max-height: inherit;\n  padding: 1rem;\n\n  > * {\n    max-height: inherit;\n    overflow-y: scroll;\n  }\n"],["\n  display: grid;\n  grid-template-columns: 1fr 20rem;\n  grid-template-rows: auto;\n  font-family: sans-serif;\n  font-size: 10px;\n  overflow: hidden;\n  max-height: inherit;\n  padding: 1rem;\n\n  > * {\n    max-height: inherit;\n    overflow-y: scroll;\n  }\n"]))),StyledField=styled_components__WEBPACK_IMPORTED_MODULE_1__.a.div(templateObject_6||(templateObject_6=__makeTemplateObject(["\n  padding: 0.5rem 1rem;\n  width: 100%;\n  overflow: hidden;\n\n  > label {\n    text-transform: uppercase;\n    display: block;\n    margin-bottom: 0.5em;\n    font-weight: bold;\n  }\n"],["\n  padding: 0.5rem 1rem;\n  width: 100%;\n  overflow: hidden;\n\n  > label {\n    text-transform: uppercase;\n    display: block;\n    margin-bottom: 0.5em;\n    font-weight: bold;\n  }\n"]))),StyledPre=styled_components__WEBPACK_IMPORTED_MODULE_1__.a.pre(templateObject_7||(templateObject_7=__makeTemplateObject(["\n  overflow: auto;\n"],["\n  overflow: auto;\n"])));function Field(t){var e=t.label,n=t.children,r=t.disabled,o=t.style;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledField,{style:__assign({},o,r?{opacity:.5}:void 0)},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label",null,e),n)}function toMachine(t){if("string"!==typeof t)return t;var e,n;try{e=new Function("Machine","interpret","XState",t)}catch(r){throw r}return e(function(t,e,r){return n=Object(xstate__WEBPACK_IMPORTED_MODULE_3__.Machine)(t,e,r),console.log(n),n},xstate_lib_interpreter__WEBPACK_IMPORTED_MODULE_2__.interpret,xstate__WEBPACK_IMPORTED_MODULE_3__),n}var StyledVisualization=styled_components__WEBPACK_IMPORTED_MODULE_1__.a.div(templateObject_8||(templateObject_8=__makeTemplateObject(["\n  max-height: inherit;\n  overflow-y: scroll;\n"],["\n  max-height: inherit;\n  overflow-y: scroll;\n"]))),StyledStateViewActions=styled_components__WEBPACK_IMPORTED_MODULE_1__.a.ul(templateObject_9||(templateObject_9=__makeTemplateObject(["\n  margin: 0;\n  padding: 0;\n  list-style: none;\n"],["\n  margin: 0;\n  padding: 0;\n  list-style: none;\n"]))),StyledStateViewAction=styled_components__WEBPACK_IMPORTED_MODULE_1__.a.li(templateObject_10||(templateObject_10=__makeTemplateObject(["\n  white-space: nowrap;\n  overflow-x: auto;\n"],["\n  white-space: nowrap;\n  overflow-x: auto;\n"]))),StateChart=function(_super){function StateChart(){var t=null!==_super&&_super.apply(this,arguments)||this;return t.state=function(){var e=toMachine(t.props.machine);return{current:e.initialState,preview:void 0,previewEvent:void 0,view:"definition",machine:e,code:"string"===typeof t.props.machine?t.props.machine:"Machine("+JSON.stringify(e.config,null,2)+")",toggledStates:{},service:Object(xstate_lib_interpreter__WEBPACK_IMPORTED_MODULE_2__.interpret)(e,{}).onTransition(function(e){t.setState({current:e},function(){t.state.previewEvent&&t.setState({preview:t.state.service.nextState(t.state.previewEvent)})})})}}(),t.svgRef=react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef(),t}return __extends(StateChart,_super),StateChart.prototype.componentDidMount=function(){this.state.service.start()},StateChart.prototype.renderView=function(){var _this=this,_a=this.state,view=_a.view,current=_a.current,machine=_a.machine,code=_a.code;switch(view){case"definition":return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Editor__WEBPACK_IMPORTED_MODULE_8__.a,{code:this.state.code,onChange:function(t){return _this.updateMachine(t)}});case"state":return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{overflowY:"auto"}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Field,{label:"Value"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledPre,null,JSON.stringify(current.value,null,2))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Field,{label:"Context",disabled:!current.context},void 0!==current.context?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledPre,null,JSON.stringify(current.context,null,2)):null),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Field,{label:"Actions",disabled:!current.actions.length},!!current.actions.length&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledPre,null,JSON.stringify(current.actions,null,2)))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Field,{label:"Event",style:{marginTop:"auto",borderTop:"1px solid #777",flexShrink:0,background:"var(--color-sidebar)"}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Editor__WEBPACK_IMPORTED_MODULE_8__.a,{height:"5rem",code:'{type: ""}',changeText:"Send event",onChange:function onChange(code){try{var eventData=eval("("+code+")");_this.state.service.send(eventData)}catch(e){console.error(e),alert("Unable to send event.\nCheck the console for more info.")}}})));default:return null}},StateChart.prototype.updateMachine=function(t){var e,n=this;try{e=toMachine(t)}catch(r){return console.error(r),void alert("Error: unable to update the machine.\nCheck the console for more info.")}this.state.service.stop(),this.setState({code:t,machine:e,current:e.initialState},function(){n.setState({service:Object(xstate_lib_interpreter__WEBPACK_IMPORTED_MODULE_2__.interpret)(n.state.machine).onTransition(function(t){n.setState({current:t},function(){n.state.previewEvent&&n.setState({preview:n.state.service.nextState(n.state.previewEvent)})})}).start()},function(){console.log(n.state.service)})})},StateChart.prototype.render=function(){var t=this,e=this.state,n=e.current,r=e.preview,o=e.previewEvent,i=e.machine,a=e.code,s=Object(xstate_lib_graph__WEBPACK_IMPORTED_MODULE_4__.getEdges)(i),c=i.getStateNodes(n),l=new Set;return c.forEach(function(t){Object.keys(t.on).forEach(function(e){t.on[e].forEach(function(t){void 0!==t.target&&l.add(e)})})}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledStateChart,{key:a,style:{height:this.props.height||"100%",background:"var(--color-app-background)","--color-app-background":"#FFF","--color-border":"#dedede","--color-primary":"rgba(87, 176, 234, 1)","--color-primary-faded":"rgba(87, 176, 234, 0.5)","--color-primary-shadow":"rgba(87, 176, 234, 0.1)","--color-link":"rgba(87, 176, 234, 1)","--color-disabled":"#c7c5c5","--color-edge":"rgba(0, 0, 0, 0.2)","--color-secondary":"rgba(255,152,0,1)","--color-secondary-light":"rgba(255,152,0,.5)","--color-sidebar":"#272722","--radius":"0.2rem","--border-width":"2px"}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledVisualization,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_StateChartNode__WEBPACK_IMPORTED_MODULE_5__.a,{stateNode:this.state.machine,current:n,preview:r,onEvent:this.state.service.send.bind(this),onPreEvent:function(e){return t.setState({preview:t.state.service.nextState(e),previewEvent:e})},onExitPreEvent:function(){return t.setState({preview:void 0,previewEvent:void 0})},toggledStates:this.state.toggledStates}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("svg",{width:"100%",height:"100%",style:{position:"absolute",top:0,left:0,"--color":"gray",overflow:"visible",pointerEvents:"none"},ref:this.svgRef,key:JSON.stringify(this.state.toggledStates)},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("marker",{id:"marker",markerWidth:"4",markerHeight:"4",refX:"2",refY:"2",markerUnits:"strokeWidth",orient:"auto"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("path",{d:"M0,0 L0,4 L4,2 z",fill:"var(--color-edge)"})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("marker",{id:"marker-preview",markerWidth:"4",markerHeight:"4",refX:"2",refY:"2",markerUnits:"strokeWidth",orient:"auto"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("path",{d:"M0,0 L0,4 L4,2 z",fill:"gray"}))),s.map(function(e){if(t.svgRef.current)return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Edge__WEBPACK_IMPORTED_MODULE_7__.a,{key:Object(_utils__WEBPACK_IMPORTED_MODULE_6__.f)(e),svg:t.svgRef.current,edge:e,preview:e.event===o&&n.matches(e.source.path.join("."))&&!!r&&r.matches(e.target.path.join("."))})}),Object(_utils__WEBPACK_IMPORTED_MODULE_6__.c)(i).map(function(e){if(t.svgRef.current)return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_InitialEdge__WEBPACK_IMPORTED_MODULE_9__.a,{key:e.id,source:e,svgRef:t.svgRef.current,preview:n.matches(e.path.join("."))||!!r&&r.matches(e.path.join("."))})}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledSidebar,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledViewTabs,null,["definition","state"].map(function(e){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledViewTab,{onClick:function(){return t.setState({view:e})},key:e,"data-active":t.state.view===e||void 0},e)})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledView,null,this.renderView())))},StateChart}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component),templateObject_1,templateObject_2,templateObject_3,templateObject_4,templateObject_5,templateObject_6,templateObject_7,templateObject_8,templateObject_9,templateObject_10},3:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(2),o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=new(function(){function t(){var t=this;this.elements=new Map,"undefined"!==typeof window&&window.addEventListener("resize",function(){t.updateAll()})}return t.prototype.updateAll=function(){var t=this;Array.from(this.elements.keys()).forEach(function(e){t.update(e,t.elements.get(e).element)})},t.prototype.update=function(t,e){var n=this;this.elements.get(t)||this.elements.set(t,{listeners:new Set,element:e||void 0,rect:e?e.getBoundingClientRect():void 0,hidden:Object(r.d)(e)});var i=o({},this.elements.get(t),{element:e||void 0,rect:e?e.getBoundingClientRect():void 0,hidden:Object(r.d)(e)});if(this.notify(i),e){var a=e.querySelectorAll("[data-id]");Array.from(a).forEach(function(t){var e=t.getAttribute("data-id");n.update(e,t)})}},t.prototype.listen=function(t,e){this.elements.get(t)||this.elements.set(t,{listeners:new Set,element:void 0,rect:void 0,hidden:!0});var n=this.elements.get(t);n.listeners.add(e),this.notify(n)},t.prototype.get=function(t){if(this.elements.get(t))return this.elements.get(t)},t.prototype.notify=function(t){t.listeners.forEach(function(e){e(t)})},t}())},34:function(t,e,n){"use strict";n.d(e,"a",function(){return C});var r=n(0),o=n.n(r),i=n(1),a=n(2),s=n(3),c=n(9),l=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},u=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=i.a.div(E||(E=l(["\n  padding-top: 0.5rem;\n  border-top: 1px solid var(--color-border);\n  display: flex;\n  padding-bottom: 1rem;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  min-height: 1rem;\n"],["\n  padding-top: 0.5rem;\n  border-top: 1px solid var(--color-border);\n  display: flex;\n  padding-bottom: 1rem;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  min-height: 1rem;\n"]))),p=i.a.button(w||(w=l(['\n  appearance: none;\n  display: inline-flex;\n  height: 1rem;\n  width: 1rem;\n  justify-content: center;\n  align-items: center;\n  background: transparent;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n\n  &:not(:hover) {\n    opacity: 0.5;\n  }\n\n  &:before {\n    --dot-size: 3px;\n    content: "";\n    display: block;\n    height: var(--dot-size);\n    width: var(--dot-size);\n    border-radius: 50%;\n    background: var(--toggle-color, gray);\n    flex-shrink: 0;\n    box-shadow: calc(-1 * (var(--dot-size) + 1px)) 0 var(--toggle-color, gray),\n      calc(var(--dot-size) + 1px) 0 var(--toggle-color, gray);\n  }\n\n  &:focus {\n    outline: none;\n  }\n'],['\n  appearance: none;\n  display: inline-flex;\n  height: 1rem;\n  width: 1rem;\n  justify-content: center;\n  align-items: center;\n  background: transparent;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n\n  &:not(:hover) {\n    opacity: 0.5;\n  }\n\n  &:before {\n    --dot-size: 3px;\n    content: "";\n    display: block;\n    height: var(--dot-size);\n    width: var(--dot-size);\n    border-radius: 50%;\n    background: var(--toggle-color, gray);\n    flex-shrink: 0;\n    box-shadow: calc(-1 * (var(--dot-size) + 1px)) 0 var(--toggle-color, gray),\n      calc(var(--dot-size) + 1px) 0 var(--toggle-color, gray);\n  }\n\n  &:focus {\n    outline: none;\n  }\n']))),f=i.a.header(O||(O=l(['\n  position: absolute;\n  z-index: 1;\n  padding: 0.25rem 0;\n  bottom: calc(100% + var(--border-width, 0));\n  left: calc(-1 * var(--border-width));\n\n  &:before {\n    display: none;\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background: var(--color-app-background);\n  }\n\n  &[data-type-symbol="history" i] {\n    --symbol-color: orange;\n  }\n\n  &[data-type-symbol] {\n    padding-right: 5em;\n\n    &:after {\n      content: attr(data-type-symbol);\n      position: absolute;\n      top: 0;\n      right: 0;\n      border-bottom-left-radius: 0.25rem;\n      background: var(--symbol-color, gray);\n      color: white;\n      padding: 0.25rem 0.5rem;\n      font-weight: bold;\n      font-size: 0.75em;\n    }\n  }\n'],['\n  position: absolute;\n  z-index: 1;\n  padding: 0.25rem 0;\n  bottom: calc(100% + var(--border-width, 0));\n  left: calc(-1 * var(--border-width));\n\n  &:before {\n    display: none;\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background: var(--color-app-background);\n  }\n\n  &[data-type-symbol="history" i] {\n    --symbol-color: orange;\n  }\n\n  &[data-type-symbol] {\n    padding-right: 5em;\n\n    &:after {\n      content: attr(data-type-symbol);\n      position: absolute;\n      top: 0;\n      right: 0;\n      border-bottom-left-radius: 0.25rem;\n      background: var(--symbol-color, gray);\n      color: white;\n      padding: 0.25rem 0.5rem;\n      font-weight: bold;\n      font-size: 0.75em;\n    }\n  }\n']))),h=i.a.div(x||(x=l(['\n  --color-shadow: rgba(0, 0, 0, 0.05);\n  --color-node-border: var(--color-border);\n  display: inline-block;\n  border-radius: 0.25rem;\n  text-align: left;\n  border: 2px solid var(--color-node-border);\n  margin: 1rem;\n  flex-grow: 0;\n  flex-shrink: 1;\n  box-shadow: 0 0.5rem 1rem var(--color-shadow);\n  background: white;\n  color: #313131;\n  min-height: 1rem;\n\n  &[data-type~="machine"] {\n    border: none;\n    box-shadow: none;\n    width: 100%;\n    background: none;\n    margin: 2rem 0;\n\n    > ',' {\n      left: 1rem;\n      font-size: 1rem;\n    }\n\n    > ul {\n      padding-right: 1.5rem;\n    }\n  }\n  &:not([data-type~="machine"]) {\n    // opacity: 0.75;\n  }\n\n  &:not([data-open="true"]) > '," > * {\n    display: none;\n  }\n\n  ",' {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  }\n\n  &[data-type~="machine"] > '," {\n    display: none;\n  }\n\n  &[data-active] {\n    --color-node-border: var(--color-primary);\n    --color-shadow: var(--color-primary-shadow);\n    opacity: 1;\n\n    > "," {\n      color: var(--color-primary);\n    }\n\n    > ",' {\n      --toggle-color: var(--color-primary);\n    }\n  }\n\n  &[data-preview]:not([data-active]) {\n    --color-node-border: var(--color-primary-faded);\n  }\n\n  &[data-type~="parallel"]\n    > ',"\n    > *:not(",') {\n    border-style: dashed;\n  }\n\n  &[data-type~="final"] {\n    &:after {\n      content: "";\n      position: absolute;\n      top: -5px;\n      left: -5px;\n      width: calc(100% + 10px);\n      height: calc(100% + 10px);\n      border: 2px solid var(--color-node-border);\n      pointer-events: none;\n      border-radius: 6px;\n      z-index: 1;\n    }\n  }\n\n  &:before {\n    content: attr(data-key);\n    color: transparent;\n    visibility: hidden;\n    height: 1px;\n    display: block;\n  }\n'],['\n  --color-shadow: rgba(0, 0, 0, 0.05);\n  --color-node-border: var(--color-border);\n  display: inline-block;\n  border-radius: 0.25rem;\n  text-align: left;\n  border: 2px solid var(--color-node-border);\n  margin: 1rem;\n  flex-grow: 0;\n  flex-shrink: 1;\n  box-shadow: 0 0.5rem 1rem var(--color-shadow);\n  background: white;\n  color: #313131;\n  min-height: 1rem;\n\n  &[data-type~="machine"] {\n    border: none;\n    box-shadow: none;\n    width: 100%;\n    background: none;\n    margin: 2rem 0;\n\n    > ',' {\n      left: 1rem;\n      font-size: 1rem;\n    }\n\n    > ul {\n      padding-right: 1.5rem;\n    }\n  }\n  &:not([data-type~="machine"]) {\n    // opacity: 0.75;\n  }\n\n  &:not([data-open="true"]) > '," > * {\n    display: none;\n  }\n\n  ",' {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  }\n\n  &[data-type~="machine"] > '," {\n    display: none;\n  }\n\n  &[data-active] {\n    --color-node-border: var(--color-primary);\n    --color-shadow: var(--color-primary-shadow);\n    opacity: 1;\n\n    > "," {\n      color: var(--color-primary);\n    }\n\n    > ",' {\n      --toggle-color: var(--color-primary);\n    }\n  }\n\n  &[data-preview]:not([data-active]) {\n    --color-node-border: var(--color-primary-faded);\n  }\n\n  &[data-type~="parallel"]\n    > ',"\n    > *:not(",') {\n    border-style: dashed;\n  }\n\n  &[data-type~="final"] {\n    &:after {\n      content: "";\n      position: absolute;\n      top: -5px;\n      left: -5px;\n      width: calc(100% + 10px);\n      height: calc(100% + 10px);\n      border: 2px solid var(--color-node-border);\n      pointer-events: none;\n      border-radius: 6px;\n      z-index: 1;\n    }\n  }\n\n  &:before {\n    content: attr(data-key);\n    color: transparent;\n    visibility: hidden;\n    height: 1px;\n    display: block;\n  }\n'])),f,d,p,p,f,p,d,p),y=i.a.ul(S||(S=l(["\n  padding: 0;\n  margin: 0.5rem 0;\n  list-style: none;\n\n  &:empty {\n    display: none;\n  }\n"],["\n  padding: 0;\n  margin: 0.5rem 0;\n  list-style: none;\n\n  &:empty {\n    display: none;\n  }\n"]))),_=i.a.ul(P||(P=l(["\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  margin-bottom: 0.5rem;\n"],["\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  margin-bottom: 0.5rem;\n"]))),v=i.a.li(k||(k=l(["\n  list-style: none;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-end;\n\n  &:not(:last-child) {\n    margin-bottom: 0.25rem;\n  }\n\n  &[data-disabled] > "," {\n    opacity: 0.7;\n  }\n"],["\n  list-style: none;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-end;\n\n  &:not(:last-child) {\n    margin-bottom: 0.25rem;\n  }\n\n  &[data-disabled] > "," {\n    opacity: 0.7;\n  }\n"])),_),m=i.a.button(D||(D=l(['\n  --color-event: var(--color-primary);\n  appearance: none;\n  background-color: var(--color-event);\n  border: none;\n  color: white;\n  font-size: 0.75em;\n  font-weight: bold;\n  padding: 0.25rem 0.25rem 0.25rem 0.5rem;\n  cursor: pointer;\n  border-radius: 2rem;\n  line-height: 1;\n  display: inline-flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  margin-right: -0.5rem;\n  margin-left: 0.5rem;\n  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n\n  &:not(:disabled):not([data-builtin]):hover {\n    --color-event: var(--color-primary);\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    --color-event: var(--color-disabled);\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  // duration\n  &[data-delay]:not([disabled]) {\n    &:before {\n      content: "";\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: var(--color-event);\n      animation: move-left calc(var(--delay) * 1ms) linear;\n      z-index: 0;\n      opacity: 0.5;\n    }\n  }\n\n  @keyframes move-left {\n    from {\n      transform: translateX(-100%);\n    }\n    to {\n      transform: none;\n    }\n  }\n\n  &[data-builtin] {\n    background-color: transparent;\n    color: black;\n    font-style: italic;\n  }\n'],['\n  --color-event: var(--color-primary);\n  appearance: none;\n  background-color: var(--color-event);\n  border: none;\n  color: white;\n  font-size: 0.75em;\n  font-weight: bold;\n  padding: 0.25rem 0.25rem 0.25rem 0.5rem;\n  cursor: pointer;\n  border-radius: 2rem;\n  line-height: 1;\n  display: inline-flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  margin-right: -0.5rem;\n  margin-left: 0.5rem;\n  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n\n  &:not(:disabled):not([data-builtin]):hover {\n    --color-event: var(--color-primary);\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    --color-event: var(--color-disabled);\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  // duration\n  &[data-delay]:not([disabled]) {\n    &:before {\n      content: "";\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: var(--color-event);\n      animation: move-left calc(var(--delay) * 1ms) linear;\n      z-index: 0;\n      opacity: 0.5;\n    }\n  }\n\n  @keyframes move-left {\n    from {\n      transform: translateX(-100%);\n    }\n    to {\n      transform: none;\n    }\n  }\n\n  &[data-builtin] {\n    background-color: transparent;\n    color: black;\n    font-style: italic;\n  }\n']))),g=i.a.li(M||(M=l(['\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 1rem;\n  list-style: none;\n  padding: 0 0.5rem;\n  margin: 0;\n\n  &:before {\n    content: attr(data-action-type) " / ";\n    margin-right: 0.5ch;\n    font-weight: bold;\n  }\n'],['\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 1rem;\n  list-style: none;\n  padding: 0 0.5rem;\n  margin: 0;\n\n  &:before {\n    content: attr(data-action-type) " / ";\n    margin-right: 0.5ch;\n    font-weight: bold;\n  }\n']))),b=i.a.div(j||(j=l(['\n  display: inline-block;\n  height: 0.5rem;\n  width: 0.5rem;\n  border-radius: 50%;\n  background-color: white;\n  margin-left: 0.5rem;\n\n  &:before {\n    content: "";\n    position: absolute;\n    top: -0.25rem;\n    left: -0.25rem;\n    width: calc(100% + 0.5rem);\n    height: calc(100% + 0.5rem);\n    border-radius: 50%;\n    background-color: var(--color-event);\n  }\n\n  &:after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: white;\n  }\n'],['\n  display: inline-block;\n  height: 0.5rem;\n  width: 0.5rem;\n  border-radius: 50%;\n  background-color: white;\n  margin-left: 0.5rem;\n\n  &:before {\n    content: "";\n    position: absolute;\n    top: -0.25rem;\n    left: -0.25rem;\n    width: calc(100% + 0.5rem);\n    height: calc(100% + 0.5rem);\n    border-radius: 50%;\n    background-color: var(--color-event);\n  }\n\n  &:after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: white;\n  }\n'])));var E,w,O,x,S,P,k,D,M,j,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={toggled:!0},e.stateRef=o.a.createRef(),e}return u(e,t),e.prototype.componentDidUpdate=function(){s.a.update(this.props.stateNode.id,this.stateRef.current)},e.prototype.render=function(){var t=this,n=this.props,r=n.stateNode,i=n.current,l=n.preview,u=n.onEvent,E=n.onPreEvent,w=n.onExitPreEvent,O=i.matches(r.path.join("."))||void 0,x=l&&l.matches(r.path.join("."))||void 0,S=r.parent?r.type:"machine "+r.type;return o.a.createElement(h,{key:r.id,"data-key":r.key,"data-id":r.id,"data-type":S,"data-active":O&&r.parent,"data-preview":x&&r.parent,"data-open":this.state.toggled||void 0,ref:this.stateRef},o.a.createElement(f,{style:{"--depth":r.path.length}},o.a.createElement("strong",null,r.key)),!!Object(a.g)(r).length&&o.a.createElement(_,null,r.definition.onEntry.map(function(t){var e=t.type;return o.a.createElement(g,{key:e,"data-action-type":"entry"},e)}),r.definition.onExit.map(function(t){var e=t.type;return o.a.createElement(g,{key:e,"data-action-type":"exit"},e)})),o.a.createElement(y,null,Object(c.getEdges)(r,{depth:0}).map(function(t){var e=t.event,n=0===e.indexOf("xstate.")||0===e.indexOf("done.")||""===e,r=!O||-1===i.nextEvents.indexOf(e)||!!t.cond&&"function"===typeof t.cond&&!t.cond(i.context,{type:e},{});t.cond&&t.cond.toString().replace(/\n/g,"");return o.a.createElement(v,{style:{"--delay":t.transition.delay},"data-disabled":r||void 0,key:Object(a.f)(t)},o.a.createElement(m,{onClick:function(){return n?void 0:u(e)},onMouseOver:function(){return E(e)},onMouseOut:function(){return w()},disabled:r,"data-delay":t.transition.delay,"data-builtin":n||void 0,"data-id":Object(a.f)(t),title:e},o.a.createElement("span",null,function(t){var e=t.match(/^xstate\.after\((\d+)\)/);return e?"after "+e[1]+"ms":(e=t.match(/^done\.state/))?"done":""===t?"transient":t}(e)),o.a.createElement(b,null)),t.transition.cond&&o.a.createElement("div",null,Object(a.b)(t.transition.cond)),!!t.transition.actions.length&&o.a.createElement(_,null,t.transition.actions.map(function(t,e){var n=t.type;return o.a.createElement(g,{"data-action-type":"do",key:n+":"+e},n)})))})),Object.keys(r.states).length?o.a.createElement(d,null,Object.keys(r.states||[]).map(function(n){var a=r.states[n];return o.a.createElement(e,{stateNode:a,current:i,preview:l,key:a.id,onEvent:u,onPreEvent:E,onExitPreEvent:w,toggledStates:t.props.toggledStates})})):null,Object.keys(r.states).length>0?o.a.createElement(p,{title:this.state.toggled?"Hide children":"Show children",onClick:function(e){e.stopPropagation(),t.setState({toggled:!t.state.toggled},function(){s.a.updateAll()})}}):null)},e}(o.a.Component)},37:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(0),o=n.n(r),i=n(2),a=n(3),s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={eventElement:null,sourceElement:null,targetElement:null,sourceData:a.a.get(e.props.edge.source.id),targetData:a.a.get(e.props.edge.target.id),eventData:a.a.get(Object(i.f)(e.props.edge))},e.ref=o.a.createRef(),e}return s(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.edge,n=Object(i.f)(e);a.a.listen(n,function(e){t.setState({eventData:e})}),a.a.listen(e.source.id,function(e){t.setState({sourceData:e})}),a.a.listen(e.target.id,function(n){for(var r=e.target,o=n;Object(i.d)(o.element)&&r.parent&&(r=r.parent,o=a.a.get(r.id)););t.setState({targetData:o||void 0})})},e.prototype.render=function(){var t=this.props.edge,e=this.state,n=e.sourceData,r=e.eventData,a=e.targetData;if(!n||n.hidden||!r||r.hidden||!a||a.hidden)return null;var s,l=this.props.svg,u=Object(i.e)(this.state.eventData.rect,l),d=Object(i.e)(this.state.targetData.rect,l),p=Object(i.a)(u),f=Object(i.a)(d),h={x:u.right-4,y:p.y},y={x:0,y:0},_=(f.y-p.y)/(f.x-p.x),v=p.y-_*p.x;switch(t.source===t.target?(s="right",y.y=h.y+10,y.x=h.x):p.x<=f.x?_*d.left+v<d.top?(y.y=d.top,y.x=(y.y-v)/_,s="top"):_*d.left+v>d.bottom?(y.y=d.bottom,y.x=(y.y-v)/_,s="bottom"):(y.x=d.left,y.y=_*y.x+v,s="left"):_*d.right+v<d.top?(y.y=d.top,y.x=(y.y-v)/_,s="top"):_*d.right+v>d.bottom?(y.y=d.bottom,y.x=(y.y-v)/_,s="bottom"):(y.x=d.right-10,p.y>f.y?(y.y=d.bottom,s="bottom"):(y.y=d.top,s="top")),s){case"bottom":y.y+=4;break;case"top":y.y-=4;break;case"left":y.x-=4;break;case"right":y.x+=4}y.x;var m=y.y-h.y,g=c({},y),b=[h,{x:h.x+10,y:Math.abs(m)>10?h.x>y.x?m>0?h.y+10:h.y-10:h.y+10:h.y}];"top"===s?g.y=g.y-10:"bottom"===s?g.y=g.y+10:"left"===s?(g.y=y.y,g.x=y.x-10):"right"===s&&(g.y=y.y,g.x=y.x+10),b.push(g),b.push(y);var E=b.reduce(function(t,e,n){if(0===n)return"M "+e.x+","+e.y;if(n===b.length-1)return t+" L "+e.x+","+e.y;var r=b[n-1],o=b[n+1];if(r.x===e.x||r.y===e.y)return t+" L "+e.x+","+e.y;var i=e.x-r.x,a=e.y-r.y,s=o.x-e.x,c=o.y-e.y,l=(r.x,r.y,e.x+s/2),u=e.y+c/2;return t+" Q "+e.x+","+e.y+" "+l+","+u},""),w=this.props.preview;return o.a.createElement("g",null,o.a.createElement("path",{d:E,stroke:w?"gray":"var(--color-edge)",strokeWidth:2,fill:"none",markerEnd:w?"url(#marker-preview)":"url(#marker)",ref:this.ref}))},e}(r.Component)},39:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(0),o=n.n(r),i=n(3),a=n(2),s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={sourceElement:void 0},e}return s(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.source.id;i.a.listen(e,function(e){t.setState({sourceElement:e.element})})},e.prototype.render=function(){var t=this.props,e=t.svgRef,n=t.preview;if(!this.state.sourceElement)return null;var r=Object(a.e)(this.state.sourceElement.getBoundingClientRect(),e),i=r.top,s=r.left,c=n?"gray":"var(--color-edge)";return o.a.createElement("g",null,o.a.createElement("circle",{r:"4",cx:s-10,cy:i,fill:c}),o.a.createElement("path",{d:"M "+(s-10)+","+i+" Q "+(s-10)+","+(i+10)+" "+(s-1)+","+(i+10)+" L "+s+","+(i+10),stroke:c,strokeWidth:"2",fill:"none",markerEnd:n?"url(#marker-preview)":"url(#marker)"}))},e}(o.a.Component)},43:function(t,e,n){t.exports=n(73)},48:function(t,e,n){},50:function(t,e,n){},73:function(t,e,n){"use strict";n.r(e);var r=n(5),o=n.n(r),i=n(30),a=n.n(i),s=(n(48),n(31)),c=n(32),l=n(40),u=n(33),d=n(41),p=(n(50),n(20)),f=".",h={},y=function(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},_=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},v=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_(arguments[e]));return t};function m(t){return"string"!==typeof t&&("value"in t&&"tree"in t&&"history"in t)}function g(t){return Object.keys(t)}function b(t,e,n){void 0===n&&(n=f);var r=O(t,n),o=O(e,n);return"string"===typeof o?"string"===typeof r&&o===r:"string"===typeof r?r in o:g(r).every(function(t){return t in o&&b(r[t],o[t])})}function E(t){try{return"string"===typeof t||"number"===typeof t?""+t:t.type}catch(e){throw new Error("Events must be strings or objects with a string event.type property.")}}function w(t,e){try{return Array.isArray(t)?t:t.toString().split(e)}catch(n){throw new Error("'"+t+"' is not a valid state path.")}}function O(t,e){return m(t)?t.value:Array.isArray(t)?x(t):"string"===typeof t||m(t)?x(w(t,e)):t}function x(t){if(1===t.length)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function S(t,e){var n={};return g(t).forEach(function(r,o){n[r]=e(t[r],r,t,o)}),n}function P(t,e,n){var r={};return g(t).forEach(function(o){var i=t[o];n(i)&&(r[o]=e(i,o,t))}),r}var k=function(t){return function(e){var n,r,o=e;try{for(var i=y(t),a=i.next();!a.done;a=i.next()){o=o[a.value]}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}};var D,M,j=function t(e){return e?"string"===typeof e?[[e]]:C(g(e).map(function(n){var r=e[n];return"string"===typeof r||Object.keys(r).length?t(e[n]).map(function(t){return[n].concat(t)}):[[n]]})):[[]]};function C(t){var e;return(e=[]).concat.apply(e,v(t))}function A(t){return Array.isArray(t)?t:void 0===t?[]:[t]}!function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication"}(D||(D={})),function(t){t.Parent="#_parent",t.Internal="#_internal"}(M||(M={}));var T=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},N=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(T(arguments[e]));return t};var R=function(){function t(t){this.actions=[],this.activities=h,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||h,this.meta=t.meta||{},this.events=t.events||[],Object.defineProperty(this,"tree",{value:t.tree,enumerable:!1})}return t.from=function(e,n){return e instanceof t?e.context!==n?new t({value:e.value,context:n,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],tree:e.tree}):e:new t({value:e,context:n,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[]})},t.create=function(e){return new t(e)},t.inert=function(e,n){return e instanceof t?e.actions.length?new t({value:e.value,context:n,historyValue:e.historyValue,history:e.history,activities:e.activities,tree:e.tree}):e:t.from(e,n)},Object.defineProperty(t.prototype,"nextEvents",{get:function(){return this.tree?this.tree.nextEvents:[]},enumerable:!0,configurable:!0}),t.prototype.toStrings=function(t,e){var n=this;if(void 0===t&&(t=this.value),void 0===e&&(e="."),"string"===typeof t)return[t];var r=g(t);return r.concat.apply(r,N(r.map(function(r){return n.toStrings(t[r]).map(function(t){return r+e+t})})))},t.prototype.matches=function(t){return b(t,this.value)},Object.defineProperty(t.prototype,"changed",{get:function(){if(this.history)return!!this.actions.length||typeof this.history.value!==typeof this.value||("string"===typeof this.value?this.value!==this.history.value:function t(e,n){if(e===n)return!0;var r=g(e),o=g(n);return r.length===o.length&&r.every(function(r){return t(e[r],n[r])})}(this.value,this.history.value))},enumerable:!0,configurable:!0}),t}(),I=(D.Start,D.Stop,D.Raise),B=D.Send,L=D.Cancel,U=D.NullEvent,W=D.Assign,K=(D.After,D.DoneState,D.Log,D.Init,D.Invoke,D.ErrorExecution),V=function(){return(V=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},z=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n};function F(t){return"string"===typeof t||"number"===typeof t?{type:t}:t}function q(t,e){if(e){var n=e[t];if(n)return n}}function H(t,e){var n;if("string"===typeof t||"number"===typeof t){var r=q(t,e);n="function"===typeof r?{type:t,exec:r}:r||{type:t,exec:void 0}}else if("function"===typeof t)n={type:t.name,exec:t};else{if("function"===typeof(r=q(t.type,e)))n=V({},t,{exec:r});else if(r){var o=t.type,i=z(t,["type"]);n=V({type:o},r,i)}else n=t}return Object.defineProperty(n,"toString",{value:function(){return n.type},enumerable:!1,configurable:!0}),n}function J(t){var e=H(t);return V({id:"string"===typeof t?t:e.id},e,{type:e.type})}function X(t){return{type:I,event:t}}function G(t,e){return{to:e?e.to:void 0,type:B,event:F(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:E(t)}}var Y=function(t){return{type:L,sendId:t}};function Q(t){var e=J(t);return{type:D.Start,activity:e,exec:void 0}}function $(t){var e=J(t);return{type:D.Stop,activity:e,exec:void 0}}function Z(t,e){var n=e?"#"+e:"";return D.After+"("+t+")"+n}function tt(t,e){var n=D.DoneState+"."+t,r={type:n,data:e,toString:function(){return n}};return r}function et(t,e){if("string"===typeof t)return V({id:t,src:t,type:D.Invoke},e);if(!("src"in t)){var n=t;return{type:D.Invoke,id:n.id,src:n}}return V({type:D.Invoke},t,{id:t.id||("string"===typeof t.src?t.src:"function"===typeof t.src?"promise":t.src.id)})}var nt=function(){return(nt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},rt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ot=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(rt(arguments[e]));return t},it={resolved:!1},at=function(){function t(e,n,r){var o;void 0===r&&(r=it),this.stateNode=e,this._stateValue=n,this.nodes=n?"string"===typeof n?((o={})[n]=new t(e.getStateNode(n),void 0),o):S(n,function(n,r){return new t(e.getStateNode(r),n)}):{};var i=nt({},it,r);this.isResolved=i.resolved}return Object.defineProperty(t.prototype,"done",{get:function(){var t=this;switch(this.stateNode.type){case"final":return!0;case"compound":return"final"===this.nodes[g(this.nodes)[0]].stateNode.type;case"parallel":return g(this.nodes).some(function(e){return t.nodes[e].done});default:return!1}},enumerable:!0,configurable:!0}),t.prototype.getDoneData=function(t,e){if(this.done&&"compound"===this.stateNode.type){var n=this.nodes[g(this.nodes)[0]];if(!n.stateNode.data)return;return function(t,e,n){return"function"===typeof t?t(e,n):g(t).reduce(function(r,o){var i=t[o];return r[o]="function"===typeof i?i(e,n):i,r},{})}(n.stateNode.data,t,e)}},Object.defineProperty(t.prototype,"atomicNodes",{get:function(){var t=this;return"atomic"===this.stateNode.type||"final"===this.stateNode.type?[this.stateNode]:C(g(this.value).map(function(e){return t.value[e].atomicNodes}))},enumerable:!0,configurable:!0}),t.prototype.getDoneEvents=function(t){var e=this;if(!t||!t.size)return[];if(t.has(this.stateNode)&&"final"===this.stateNode.type)return[tt(this.stateNode.id,this.stateNode.data)];var n=C(g(this.nodes).map(function(n){return e.nodes[n].getDoneEvents(t)}));if("parallel"===this.stateNode.type){var r=g(this.nodes).every(function(t){return e.nodes[t].done});return n&&r?[tt(this.stateNode.id)].concat(n):n}if(!this.done||!n.length)return n;var o=1===n.length?n[0].data:void 0;return[tt(this.stateNode.id,o)].concat(n)},Object.defineProperty(t.prototype,"resolved",{get:function(){return new t(this.stateNode,this.stateNode.resolve(this.value),{resolved:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paths",{get:function(){return j(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"absolute",{get:function(){var e=this,n=this._stateValue,r={},o=r;return this.stateNode.path.forEach(function(t,r){r===e.stateNode.path.length-1?o[t]=n:(o[t]={},o=o[t])}),new t(this.stateNode.machine,r)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextEvents",{get:function(){var t=this,e=this.stateNode.ownEvents,n=C(g(this.nodes).map(function(e){return t.nodes[e].nextEvents}));return ot(new Set(n.concat(e)))},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.stateNode,this.value)},t.prototype.combine=function(t){var e,n=this;if(t.stateNode!==this.stateNode)throw new Error("Cannot combine distinct trees");if("compound"===this.stateNode.type){var r=void 0;if(g(this.nodes).length&&g(t.nodes).length){var o=g(this.nodes)[0];return(e={})[o]=this.nodes[o].combine(t.nodes[o]),r=e,(i=this.clone()).nodes=r,i}return r=Object.assign({},this.nodes,t.nodes),(i=this.clone()).nodes=r,i}if("parallel"===this.stateNode.type){var i,a=new Set(ot(g(this.nodes),g(t.nodes))),s={};return a.forEach(function(e){n.nodes[e]&&t.nodes[e]?s[e]=n.nodes[e].combine(t.nodes[e]):s[e]=n.nodes[e]||t.nodes[e]}),(i=this.clone()).nodes=s,i}return this},Object.defineProperty(t.prototype,"value",{get:function(){if("atomic"===this.stateNode.type||"final"===this.stateNode.type)return{};if("parallel"===this.stateNode.type)return S(this.nodes,function(t){return t.value});if("compound"===this.stateNode.type){if(0===g(this.nodes).length)return{};var t=this.nodes[g(this.nodes)[0]].stateNode;return"atomic"===t.type||"final"===t.type?t.key:S(this.nodes,function(t){return t.value})}return{}},enumerable:!0,configurable:!0}),t.prototype.matches=function(t){return b(t,this.value)},t.prototype.getEntryExitStates=function(t,e){var n=this;if(t.stateNode!==this.stateNode)throw new Error("Cannot compare distinct trees");switch(this.stateNode.type){case"compound":var r={exit:[],entry:[]},o=g(this.nodes)[0],i=g(t.nodes)[0];return o!==i?(r.exit=t.nodes[i].getExitStates(),r.entry=this.nodes[o].getEntryStates()):r=this.nodes[o].getEntryExitStates(t.nodes[i],e),e&&e.has(this.stateNode)&&(r.exit.push(this.stateNode),r.entry.unshift(this.stateNode)),r;case"parallel":var a=g(this.nodes).map(function(r){return n.nodes[r].getEntryExitStates(t.nodes[r],e)}),s={exit:[],entry:[]};return a.forEach(function(t){s.exit=ot(s.exit,t.exit),s.entry=ot(s.entry,t.entry)}),e&&e.has(this.stateNode)&&(s.exit.push(this.stateNode),s.entry.unshift(this.stateNode)),s;case"atomic":default:return e&&e.has(this.stateNode)?{exit:[this.stateNode],entry:[this.stateNode]}:{exit:[],entry:[]}}},t.prototype.getEntryStates=function(){var t=this;return this.nodes?[this.stateNode].concat(C(g(this.nodes).map(function(e){return t.nodes[e].getEntryStates()}))):[this.stateNode]},t.prototype.getExitStates=function(){var t=this;return this.nodes?C(g(this.nodes).map(function(e){return t.nodes[e].getExitStates()})).concat(this.stateNode):[this.stateNode]},t}(),st=function(){return(st=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n},lt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ut=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(lt(arguments[e]));return t},dt=function(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},pt=".",ft="",ht={},yt=function(t){return"#"===t[0]},_t=function(){return{guards:ht}},vt=!0,mt=function(){function t(e,n,r){void 0===n&&(n=_t());var o=this;this._config=e,this.options=n,this.context=r,this.__cache={events:void 0,relativeValue:new Map,initialState:void 0},this.idMap={},this.key=e.key||e.id||"(machine)",this.parent=e.parent,this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=e.delimiter||(this.parent?this.parent.delimiter:pt),this.id=e.id||(this.machine?ut([this.machine.key],this.path).join(this.delimiter):this.key),this.type=e.type||(e.parallel?"parallel":e.states&&g(e.states).length?"compound":e.history?"history":"atomic"),!vt&&"parallel"in e&&console.warn('The "parallel" property is deprecated and will be removed in version 4.1. '+(e.parallel?"Replace with `type: 'parallel'`":"Use `type: '"+this.type+"'`")+" in the config for state node '"+this.id+"' instead."),this.initial=e.initial,this.order=e.order||-1,this.states=e.states?S(e.states,function(e,n,r,i){var a,s=new t(st({},e,{key:n,order:void 0===e.order?e.order:i,parent:o}));return Object.assign(o.idMap,st(((a={})[s.id]=s,a),s.idMap)),s}):ht,this.history=!0===e.history?"shallow":e.history||!1,this.transient=!(!e.on||!e.on[ft]),this.strict=!!e.strict,this.onEntry=A(e.onEntry).map(function(t){return H(t)}),this.onExit=A(e.onExit).map(function(t){return H(t)}),this.meta=e.meta,this.data="final"===this.type?e.data:void 0,this.invoke=A(e.invoke).map(function(t){return et(t)}),this.activities=A(e.activities).concat(this.invoke).map(function(t){return o.resolveActivity(t)})}return t.prototype.withConfig=function(e,n){var r=this.options,o=r.actions,i=r.activities,a=r.guards;return new t(this.definition,{actions:st({},o,e.actions),activities:st({},i,e.activities),guards:st({},a,e.guards)},n)},t.prototype.withContext=function(e){return new t(this.definition,this.options,e)},Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,type:this.type,initial:this.initial,history:this.history,states:S(this.states,function(t){return t.definition}),on:this.on,onEntry:this.onEntry,onExit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.data}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){var t=this._config;t.parent;return ct(t,["parent"])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"on",{get:function(){return this.formatTransitions()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){var t=this;return C(g(this.on).map(function(e){return t.on[e]}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){var t=this,e=this.config.after;if(!e)return[];if(Array.isArray(e))return e.map(function(e){return st({event:Z(e.delay,t.id)},e,{actions:A(e.actions).map(function(t){return H(t)})})});var n=C(g(e).map(function(n){var r=e[n],o=+n,i=Z(o,t.id);return"string"===typeof r?[{target:r,delay:o,event:i,actions:[]}]:A(r).map(function(t){return st({event:i,delay:o},t,{actions:A(t.actions).map(function(t){return H(t)})})})}));return n.sort(function(t,e){return t.delay-e.delay}),n},enumerable:!0,configurable:!0}),t.prototype.getStateNodes=function(t){var e,n=this;if(!t)return[];var r=t instanceof R?t.value:O(t,this.delimiter);if("string"===typeof r){var o=this.getStateNode(r).initial;return o?this.getStateNodes(((e={})[r]=o,e)):[this.states[r]]}var i=g(r);return i.map(function(t){return n.getStateNode(t)}).concat(i.reduce(function(t,e){var o=n.getStateNode(e).getStateNodes(r[e]);return t.concat(o)},[]))},t.prototype.handles=function(t){var e=E(t);return-1!==this.events.indexOf(e)},t.prototype.transitionLeafNode=function(t,e,n,r){var o=this.getStateNode(t).next(e,n,r);if(!o.tree){var i=this.next(e,n,r),a=i.reentryStates,s=i.actions;return{tree:i.tree,source:e,reentryStates:a,actions:s}}return o},t.prototype.transitionCompoundNode=function(t,e,n,r){var o=g(t),i=this.getStateNode(o[0])._transition(t[o[0]],e,n,r);if(!i.tree){var a=this.next(e,n,r),s=a.reentryStates,c=a.actions;return{tree:a.tree,source:e,reentryStates:s,actions:c}}return i},t.prototype.transitionParallelNode=function(t,e,n,r){var o=this,i=[],a={};if(g(t).forEach(function(s){var c=t[s];if(c){var l=o.getStateNode(s)._transition(c,e,n,r);l.tree||i.push(s),a[s]=l}}),!g(a).some(function(t){return void 0!==a[t].tree})){var s=this.next(e,n,r),c=s.reentryStates,l=s.actions;return{tree:s.tree,source:e,reentryStates:c,actions:l}}var u=g(a).map(function(t){return a[t].tree}).filter(function(t){return void 0!==t}).reduce(function(t,e){return t.combine(e)});return 1!==u.paths.length||b(O(this.path,this.delimiter),u.value)?{tree:g(a).map(function(t){var n=a[t],r=k(o.path)(n.tree?n.tree.value:e.value||e.value)[t];return new at(o.getStateNode(t),r).absolute}).reduce(function(t,e){return t.combine(e)}),source:e,reentryStates:g(a).reduce(function(t,e){var n=a[e],r=n.tree,o=n.reentryStates;return r&&o?new Set(ut(Array.from(t),Array.from(o))):t},new Set),actions:C(g(a).map(function(t){return a[t].actions}))}:{tree:u,source:e,reentryStates:g(a).map(function(t){return a[t].reentryStates}).reduce(function(t,e){return new Set(ut(Array.from(t||[]),Array.from(e||[])))},new Set),actions:C(g(a).map(function(t){return a[t].actions}))}},t.prototype._transition=function(t,e,n,r){return"string"===typeof t?this.transitionLeafNode(t,e,n,r):1===g(t).length?this.transitionCompoundNode(t,e,n,r):this.transitionParallelNode(t,e,n,r)},t.prototype.next=function(t,e,n){var r,o,i=this,a=e.type,s=this.on[a],c=this.transient?[{type:U}]:[];if(!s||!s.length)return{tree:void 0,source:t,reentryStates:void 0,actions:c};var l,u=[];try{for(var d=dt(s),p=d.next();!p.done;p=d.next()){var f=p.value,h=f,y=h.cond,_=h.in,v=n||ht,m=!_||("string"===typeof _&&yt(_)?t.matches(O(this.getStateNodeById(_).path,this.delimiter)):b(O(_,this.delimiter),k(this.path.slice(0,-2))(t.value)));if((!y||this.evaluateGuard(y,v,e,t.value))&&m){u=A(f.target),c.push.apply(c,ut(A(f.actions))),l=f;break}}}catch(w){r={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}if(l&&0===u.length)return{tree:t.value?this.machine.getStateTree(t.value):void 0,source:t,reentryStates:void 0,actions:c};if(!l&&0===u.length)return{tree:void 0,source:t,reentryStates:void 0,actions:c};var g=C(u.map(function(e){return i.getRelativeStateNodes(e,t.historyValue)})),E=!!l.internal?[]:C(g.map(function(t){return i.nodesFromChild(t)}));return{tree:g.map(function(t){return t.tree}).reduce(function(t,e){return t.combine(e)}),source:t,reentryStates:new Set(E),actions:c}},Object.defineProperty(t.prototype,"tree",{get:function(){var t=O(this.path,this.delimiter);return new at(this.machine,t)},enumerable:!0,configurable:!0}),t.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],n=t;n&&n!==this;)e.push(n),n=n.parent;return e.push(this),e},t.prototype.getStateTree=function(t){return new at(this,t)},t.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},t.prototype.evaluateGuard=function(t,e,n,r){var o,i=this.machine.options.guards;if("string"===typeof t){if(!i||!i[t])throw new Error("Condition '"+t+"' is not implemented on machine '"+this.machine.id+"'.");o=i[t]}else o=t;return o(e,n,r)},Object.defineProperty(t.prototype,"delays",{get:function(){var t=this;return Array.from(new Set(this.transitions.map(function(t){return t.delay}).filter(function(t){return void 0!==t}))).map(function(e){return{id:t.id,delay:e}})},enumerable:!0,configurable:!0}),t.prototype.getActions=function(t,e){var n=this,r=t.tree?t.tree.resolved.getEntryExitStates(this.getStateTree(e.value),t.reentryStates?t.reentryStates:void 0):{entry:[],exit:[]},o=t.tree?t.tree.getDoneEvents(new Set(r.entry)):[];t.source||(r.exit=[]);var i={entry:C(Array.from(new Set(r.entry)).map(function(t){return ut(t.onEntry,t.activities.map(function(t){return Q(t)}),t.delays.map(function(t){var e=t.delay;return G(Z(e,t.id),{delay:e})}))})).concat(o.map(X)),exit:C(Array.from(new Set(r.exit)).map(function(t){return ut(t.onExit,t.activities.map(function(t){return $(t)}),t.delays.map(function(t){var e=t.delay,n=t.id;return Y(Z(e,n))}))}))};return i.exit.concat(t.actions).concat(i.entry).map(function(t){return n.resolveAction(t)})},t.prototype.resolveAction=function(t){return H(t,this.machine.options.actions)},t.prototype.resolveActivity=function(t){return J(t)},t.prototype.getActivities=function(t,e){if(!t)return ht;var n=st({},e);return Array.from(t.exit).forEach(function(t){t.activities.forEach(function(t){n[t.type]=!1})}),Array.from(t.entry).forEach(function(t){t.activities.forEach(function(t){n[t.type]=!0})}),n},t.prototype.transition=function(t,e,n){var r="string"===typeof t?this.resolve(x(this.getResolvedPath(t))):t instanceof R?t:this.resolve(t),o=n||(t instanceof R?t.context:this.machine.context),i=F(e),a=i.type;if(this.strict&&-1===this.events.indexOf(a))throw new Error("Machine '"+this.id+"' does not accept event '"+a+"'");var s=R.from(r,o),c=this._transition(s.value,s,i,o),l=st({},c,{tree:c.tree?c.tree.resolved:void 0});return this.resolveTransition(l,s,i)},t.prototype.resolveTransition=function(e,n,r){var o,i=e.tree?e.tree.value:void 0,a=n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0;if(!vt&&e.tree)try{this.ensureValidPaths(e.tree.paths)}catch(w){throw new Error("Event '"+(r?r.type:"none")+"' leads to an invalid configuration: "+w.message)}var s=this.getActions(e,n),c=e.tree?e.tree.getEntryExitStates(this.getStateTree(n.value)):{entry:[],exit:[]},l=e.tree?this.getActivities({entry:new Set(c.entry),exit:new Set(c.exit)},n.activities):{},u=s.filter(function(t){return t.type===I||t.type===U}),d=s.filter(function(t){return t.type!==I&&t.type!==U&&t.type!==W}),p=s.filter(function(t){return t.type===W}),f=t.updateContext(n.context,r,p),h=i?this.getStateNodes(i):[];h.some(function(t){return t.transient})&&u.push({type:U});var y,_,v=ut([this],h).reduce(function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t},{}),m=i?new R({value:i,context:f,historyValue:a?t.updateHistoryValue(a,i):void 0,history:e.source?n:void 0,actions:(y=d,_=this.options.actions,y?(Array.isArray(y)?y:[y]).map(function(t){return H(t,_)}):[]),activities:l,meta:v,events:u,tree:e.tree}):void 0;if(!m)return R.inert(n,f);n.history&&delete n.history.history;for(var g=m;u.length;){var b=g.actions,E=u.shift();(o=(g=this.transition(g,E.type===U?ft:E.event,g.context)).actions).unshift.apply(o,ut(b))}return g},t.updateContext=function(t,e,n){return t?n.reduce(function(t,n){var r=n.assignment,o={};return"function"===typeof r?o=r(t,e||{type:D.Init}):g(r).forEach(function(n){var i=r[n];o[n]="function"===typeof i?i(t,e):i}),Object.assign({},t,o)},t):t},t.prototype.ensureValidPaths=function(t){var e,n,r=this,o=new Map,i=C(t.map(function(t){return r.getRelativeStateNodes(t)}));try{t:for(var a=dt(i),s=a.next();!s.done;s=a.next())for(var c=s.value,l=c;l.parent;){if(o.has(l.parent)){if("parallel"===l.parent.type)continue t;throw new Error("State node '"+c.id+"' shares parent '"+l.parent.id+"' with state node '"+o.get(l.parent).map(function(t){return t.id})+"'")}o.get(l.parent)?o.get(l.parent).push(c):o.set(l.parent,[c]),l=l.parent}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}},t.prototype.getStateNode=function(t){if(yt(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '"+t+"' from '"+this.id+"'; no child states exist.");var e=this.states[t];if(!e)throw new Error("Child state '"+t+"' does not exist on '"+this.id+"'");return e},t.prototype.getStateNodeById=function(t){var e=yt(t)?t.slice("#".length):t;if(e===this.id)return this;var n=this.machine.idMap[e];if(!n)throw new Error("Substate '#"+e+"' does not exist on '"+this.id+"'");return n},t.prototype.getStateNodeByPath=function(t){for(var e=w(t,this.delimiter).slice(),n=this;e.length;){var r=e.shift();n=n.getStateNode(r)}return n},t.prototype.resolve=function(t){var e,n=this;if(!t)return this.initialStateValue||ht;switch(this.type){case"parallel":return S(this.initialStateValue,function(e,r){return e?n.getStateNode(r).resolve(t[r]||e):ht});case"compound":if("string"===typeof t){var r=this.getStateNode(t);return"parallel"===r.type||"compound"===r.type?((e={})[t]=r.initialStateValue,e):t}return g(t).length?S(t,function(t,e){return t?n.getStateNode(e).resolve(t):ht}):this.initialStateValue||{};default:return t||ht}},Object.defineProperty(t.prototype,"resolvedStateValue",{get:function(){var t,e,n=this.key;return"parallel"===this.type?((t={})[n]=P(this.states,function(t){return t.resolvedStateValue[t.key]},function(t){return!t.history}),t):this.initial?((e={})[n]=this.states[this.initial].resolvedStateValue,e):n},enumerable:!0,configurable:!0}),t.prototype.getResolvedPath=function(t){if(yt(t)){var e=this.machine.idMap[t.slice("#".length)];if(!e)throw new Error("Unable to find state node '"+t+"'");return e.path}return w(t,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){if(this.__cache.initialState)return this.__cache.initialState;var t="parallel"===this.type?P(this.states,function(t){return t.initialStateValue||ht},function(t){return!t.history}):"string"===typeof this.resolvedStateValue?void 0:this.resolvedStateValue[this.key];return this.__cache.initialState=t,this.__cache.initialState},enumerable:!0,configurable:!0}),t.prototype.getInitialState=function(e,n){void 0===n&&(n=this.machine.context);var r={},o=[];this.getStateNodes(e).forEach(function(t){t.onEntry&&o.push.apply(o,ut(t.onEntry)),t.activities&&t.activities.forEach(function(t){r[E(t)]=!0,o.push(Q(t))})});var i=o.filter(function(t){return"object"===typeof t&&t.type===W}),a=t.updateContext(n,void 0,i);return new R({value:e,context:a,activities:r})},Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '"+this.id+"'.");var e=this.getInitialState(t);return this.resolveTransition({tree:this.getStateTree(t),source:void 0,reentryStates:new Set(this.getStateNodes(t)),actions:[]},e,void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var t;if(this.history){var e=this.config;t=e.target&&"string"===typeof e.target&&yt(e.target)?x(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!0,configurable:!0}),t.prototype.getStates=function(t){var e=this;if("string"===typeof t)return[this.states[t]];var n=[];return g(t).forEach(function(r){n.push.apply(n,ut(e.states[r].getStates(t[r])))}),n},t.prototype.getRelativeStateNodes=function(t,e,n){if(void 0===n&&(n=!0),"string"===typeof t&&yt(t)){var r=this.getStateNodeById(t);return n?r.history?r.resolveHistory(e):r.initialStateNodes:[r]}var o=w(t,this.delimiter),i=(this.parent||this).getFromRelativePath(o,e);return n?C(i.map(function(t){return t.initialStateNodes})):i},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var t=this;if("atomic"===this.type||"final"===this.type)return[this];if("compound"===this.type&&!this.initial)return vt||console.warn("Compound state node '"+this.id+"' has no initial state."),[this];var e=this.initialStateValue;return C(j(e).map(function(e){return t.getFromRelativePath(e)}))},enumerable:!0,configurable:!0}),t.prototype.getFromRelativePath=function(t,e){if(!t.length)return[this];var n=lt(t),r=n[0],o=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '"+r+"' from node with no states");var i=this.getStateNode(r);if(i.history)return i.resolveHistory(e);if(!this.states[r])throw new Error("Child state '"+r+"' does not exist on '"+this.id+"'");return this.states[r].getFromRelativePath(o,e)},t.updateHistoryValue=function(t,e){return{current:e,states:function t(e,n){return S(e.states,function(e,r){if(e){var o=("string"===typeof n?void 0:n[r])||(e?e.current:void 0);if(o)return{current:o,states:t(e,o)}}})}(t,e)}},t.prototype.historyValue=function(t){if(g(this.states).length)return{current:t||this.initialStateValue,states:P(this.states,function(e,n){if(!t)return e.historyValue();var r="string"===typeof t?void 0:t[n];return e.historyValue(r||e.initialStateValue)},function(t){return!t.history})}},t.prototype.resolveHistory=function(t){var e=this;if(!this.history)return[this];var n=this.parent;if(!t)return this.target?C(j(this.target).map(function(t){return n.getFromRelativePath(t)})):this.parent.initialStateNodes;var r,o,i=(r=n.path,o="states",function(t){var e,n,i=t;try{for(var a=y(r),s=a.next();!s.done;s=a.next()){var c=s.value;i=i[o][c]}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i})(t).current;return"string"===typeof i?[n.getStateNode(i)]:C(j(i).map(function(t){return"deep"===e.history?n.getFromRelativePath(t):[n.states[t[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var t=this,e=C(g(this.states).map(function(e){return t.states[e].stateIds}));return[this.id].concat(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){if(this.__cache.events)return this.__cache.events;var t=this.states,e=new Set(this.ownEvents);return t&&g(t).forEach(function(n){var r,o,i=t[n];if(i.states)try{for(var a=dt(i.events),s=a.next();!s.done;s=a.next()){var c=s.value;e.add(""+c)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}}),this.__cache.events=Array.from(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var t=this,e=new Set(g(this.on).filter(function(e){return t.on[e].some(function(t){return!(!t.target&&!t.actions.length&&t.internal)})}));return Array.from(e)},enumerable:!0,configurable:!0}),t.prototype.formatTransition=function(t,e,n){var r=this,o=!!e&&e.internal;if(void 0===t||""===t)return st({},e,{actions:e?A(e.actions).map(function(t){return H(t)}):[],target:void 0,internal:!e||(void 0===e.internal||e.internal),event:n});var i=A(t).map(function(t){var e="string"===typeof t&&t[0]===r.delimiter;return o=o||e,e&&!r.parent?t.slice(1):e?r.key+t:""+t});return st({},e,{actions:e?A(e.actions).map(function(t){return H(t)}):[],target:i,internal:o,event:n})},t.prototype.formatTransitions=function(){var t,e=this,n=this.config.on||ht,r=this.config.onDone?((t={})[""+tt(this.id)]=this.config.onDone,t):void 0,o=this.invoke.reduce(function(t,e){return e.onDone&&(t[function(t,e){var n=D.DoneInvoke+"."+t,r={type:n,data:e,toString:function(){return n}};return r}(e.id)]=e.onDone),e.onError&&(t[K]=e.onError),t},{}),i=this.after,a=S(st({},n,r,o),function(t,n){return void 0===t?[{target:void 0,event:n,actions:[],internal:!0}]:Array.isArray(t)?t.map(function(t){return e.formatTransition(t.target,t,n)}):"string"===typeof t?[e.formatTransition([t],void 0,n)]:(vt||g(t).forEach(function(t){if(-1===["target","actions","internal","in","cond"].indexOf(t))throw new Error("State object mapping of transitions is deprecated. Check the config for event '"+n+"' on state '"+e.id+"'.")}),[e.formatTransition(t.target,t,n)])});return i.forEach(function(t){a[t.event]=a[t.event]||[],a[t.event].push(t)}),a},t}();var gt,bt,Et,wt=(gt={id:"light",initial:"green",states:{green:{on:{TIMER:"yellow"}},yellow:{on:{TIMER:"red"}},red:{on:{TIMER:"green"}}}},void 0===Et&&(Et=gt.context),new mt(gt,bt,Et)),Ot=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(p.a,{machine:wt}))}}]),e}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(Ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[43,2,1]]]);
//# sourceMappingURL=main.55e278ef.chunk.js.map